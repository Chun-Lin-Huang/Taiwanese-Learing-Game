/* ===== ResponsePage 專屬樣式 ===== */
/* 固定底部輸入列高度（方便一起算間距） */
:root {
  --input-bar-h: 72px;      /* 輸入列本體高度 */
  --input-bar-gap: 16px;    /* 與底部的外距 */
}

/* 外層容器置中 */
.response-page {
  /*
    重要：這裡不再需要設定固定高度
    flex: 1; 會讓它自動填滿所有可用空間
  */
  flex: 1; 
  display: flex;
  flex-direction: column;
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
  box-sizing: border-box;
  position: relative; /* 為了讓內容滾動區可以相對於它定位 */
}

/* 讓捲動區有底部空間，不會被輸入列蓋到 */
/* 聊天內容區 */
.response-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px 16px 110px;     /* ← 底部留白要 ≥ 輸入列高度 */
  /* ↑ 底部預留：輸入列高度 + 外距 + 一點緩衝 */
  scroll-padding-bottom: 160px; /* ← scrollIntoView 會預留這段距離 */
  box-sizing: border-box;
  overflow-y: auto;
}

/* 每一行訊息 */
.msg-row {
  width: 100%;
  display: flex;
  scroll-margin-bottom: 160px;  /* ← 保證不被固定輸入列蓋住 */
}

/* 使用者發送：靠右 */
.msg-row.sent {
  justify-content: flex-end;
}

/* 系統回覆：靠左 */
.msg-row.received {
  justify-content: flex-start;
}

/* 包裝訊息，避免太寬 */
.msg-wrap {
  display: flex;
  flex-direction: column;
  max-width: 70%;   /* 泡泡不要佔滿整行 */
}

/* 使用者名字靠右 */
.msg-row.sent .msg-wrap {
  align-items: flex-end;
  text-align: right;
}

/* 系統名字靠左 */
.msg-row.received .msg-wrap {
  align-items: flex-start;
  text-align: left;
}

/* 泡泡本體 */
.message-bubble {
  background: #ffd68a;
  padding: 10px 14px;
  border-radius: 18px;
  word-break: break-word;
  white-space: pre-wrap;
}

/* 如果想讓顏色更明顯 */
.msg-row.sent .message-bubble {
  background: #ffe2a8;  /* 使用者訊息顏色 */
}
.msg-row.received .message-bubble {
  background: #ffd08a;  /* 系統訊息顏色 */
}

.received .message-bubble { background-color: #ffd991; }
.sent .message-bubble { background-color: #fff7b1; }


/* 背景容器 */
.selection-bg {
  position: relative;
  min-height: 100vh;
  /* 若你已在 body 設背景，可省略這行 */
  background: #fffbe6;
}

/* 讓格子背景不會因為滾動而消失：用 fixed 蓋滿視窗 */
.selection-bg::before {
  content: "";
  position: fixed;              /* ← 關鍵：固定在視窗 */
  inset: 0;
  z-index: -1;                  /* 在內容下方 */
  background: url('../assets/22600173.png') center no-repeat;
  background-size: 120% auto;
  opacity: 0.15;
  pointer-events: none;
}

/* 固定在頁面底部的輸入列 */
.input-bar-fixed {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: var(--input-bar-gap);
  width: min(900px, calc(100% - 80px));  /* 置中，左右留白 */
  height: var(--input-bar-h);
  display: flex;
  align-items: center;
  gap: 12px;
  background: #fff3c4;
  border-radius: 36px;
  padding: 10px 14px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  z-index: 1001; /* 蓋在聊天泡泡上 */
}

.input-bar-fixed .input-placeholder {
  flex: 1;
  height: 44px;
  border-radius: 24px;
  border: 2px solid #5a78a8;
  padding: 0 14px;
  font-size: 16px;
  background: #fff;
}

.input-bar-fixed .send-button {
  height: 44px;
  padding: 0 16px;
  border: none;
  border-radius: 22px;
  background: #ffd36b;
  font-weight: 700;
  cursor: pointer;
}

/* 響應式 */
@media (max-width: 768px) {
	.response-content { padding: 20px 30px 20px; }
	.sender-name { font-size: 14px; }
	.message-bubble { max-width: 90%; font-size: 14px; }
	.input-bar-fixed .input-placeholder,
	.input-bar-fixed .send-button { font-size: 14px; height: 40px; }
}

@media (max-width: 480px) {
	.response-content { padding: 15px 20px 20px; }
	.input-bar-fixed { width: 95%; }
}

/* ===== Scroll/visibility tweaks ===== */
html, body {
	height: 100%;
	overflow: hidden; /* 隱藏全頁捲軸，只讓聊天區滾動 */
}

/* 只保留聊天內容滾動，但不顯示滾動條 */
.response-content {
	overflow-y: auto;
	scrollbar-width: none;            /* Firefox 隱藏捲軸 */
}
.response-content::-webkit-scrollbar { /* Chrome/Safari 隱藏捲軸 */
	width: 0;
	height: 0;
}

/* 輸入框多行時在內部滾動，不推擠版面 */
.input-bar-fixed .input-placeholder {
	overflow-y: auto;
	white-space: pre-wrap;
	word-break: break-word;
	resize: none; /* 若為 textarea 可防止用戶拖拉 */
	line-height: 1.4;
	max-height: 40vh; /* 限制最高，避免過高遮蔽內容 */
}

/* === Avoid overlap with fixed header === */
.page-bg .response-content {
	padding-top: calc(20px + var(--header-height, 80px));
}

/* === Larger chat bubble and text === */
.message-group { gap: 8px; }
.message-bubble {
	font-size: 18px;
	padding: 14px 20px;
	border-radius: 28px;
}
.sender-name { font-size: 18px; }

@media (max-width: 768px) {
	.message-bubble { font-size: 16px; padding: 12px 18px; border-radius: 24px; }
	.sender-name { font-size: 16px; }
}
@media (max-width: 480px) {
	.message-bubble { font-size: 15px; padding: 10px 16px; border-radius: 22px; }
	.sender-name { font-size: 15px; }
}

/* === Wider bubbles and tighter side padding for more characters per line === */
.page-bg .response-content {
	padding-left: 30px; /* 原為 60px → 30px，讓可用寬度更大 */
	padding-right: 30px;
}

/* 桌機與行動裝置統一允許泡泡使用整個可用寬度 */
.response-content .message-bubble { max-width: 100%; }

@media (max-width: 768px) {
	.response-content .message-bubble { max-width: 100%; }
}